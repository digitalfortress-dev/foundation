import ComingSoon from "../../../../../components/coming-soon"
import { FileTree, Callout, Table, Tr, Td, Th, Steps, Tabs } from "nextra/components"

# üåç Next.js Internationalization (i18n) with next-intl

In this guide you will learn how to set up internationalization (i18n) in your Next.js app.

With Next.js 13, the [App Router](https://nextjs.org/docs/app) along with support for React Server Components was introduced and announced as stable with version 13.4. Following the lead of Next.js, `next-intl` also recommends this paradigm since it increases both simplicity as well as flexibility when it comes to i18n.

<div className="w-full md:w-1/2 text-black dark:text-white">
  <a href="https://next-intl.dev/docs/getting-started/app-router" target='_blank' className="block p-5 px-6 my-4 bg-transparent border border-gray-600 rounded-xl no-underline text-lg font-medium transition-all duration-200 relative overflow-hidden hover:border-gray-500 hover:bg-white/5 hover:-translate-y-0.5 group">
        Usage with the App Router
        <span className="absolute right-6 top-1/2 -translate-y-1/2 text-xl font-light opacity-70 transition-all duration-200 arrow-after group-hover:opacity-100 group-hover:translate-x-1"></span>
    </a>

    <a href="https://next-intl.dev/docs/getting-started/pages-router" target='_blank' className="block p-5 px-6 my-4 bg-transparent border border-gray-600 rounded-xl no-underline text-lg font-medium transition-all duration-200 relative overflow-hidden hover:border-gray-500 hover:bg-white/5 hover:-translate-y-0.5 group">
        Usage with the Pages Router
        <span className="absolute right-6 top-1/2 -translate-y-1/2 text-xl font-light opacity-70 transition-all duration-200 arrow-after group-hover:opacity-100 group-hover:translate-x-1"></span>
    </a>

</div>

## Best Practices for Managing Translations with `next-intl`

#### 1. Split translation files by feature or page instead of having one large file per locale.

<div className="flex gap-4 mt-6">
  <div className="flex items-center justify-center flex-1 flex-col">
    <h4 className="text-md font-bold">‚úÖ Recommended Structure</h4>
    <div className="flex justify-center items-center">
      <FileTree>
        <FileTree.Folder name="messages" defaultOpen>
          <FileTree.Folder name="en" defaultOpen>
            <FileTree.File name="home.json" />
            <FileTree.File name="auth.json" />
            <FileTree.File name="common.json" />
            <FileTree.File name="settings.json" />
          </FileTree.Folder>
          <FileTree.Folder name="vi" defaultOpen>
            <FileTree.File name="home.json" />
            <FileTree.File name="auth.json" />
            <FileTree.File name="common.json" />
            <FileTree.File name="settings.json" />
          </FileTree.Folder>
        </FileTree.Folder>
      </FileTree>
    </div>
  </div>

  <div className="flex items-center justify-start flex-1 flex-col border-l border-gray-300 dark:border-gray-800">
      <h4 className="text-md font-bold">‚ùå Not Recommended Structure</h4>
    <div className="flex justify-center items-center">
    <FileTree>
      <FileTree.Folder name="messages" defaultOpen>
        <FileTree.File name="en.json" />
        <FileTree.File name="vi.json" />
      </FileTree.Folder>
    </FileTree>
    </div>
  </div>
</div>

<table className="mt-6">
  <thead>
    <Tr>
      <Th>Benefit</Th>
      <Th>Explanation</Th>
    </Tr>
  </thead>
  <tbody>
    <Tr>
      <Td>‚úÖ Modular and organized</Td>
      <Td>Each file maps to a specific feature or page (e.g., Home, Auth)</Td>
    </Tr>
    <Tr>
      <Td>‚úÖ Easy to scale</Td>
      <Td>
        As you add more pages, just add more message files without clutter
      </Td>
    </Tr>
    <Tr>
      <Td>‚úÖ Easier collaboration</Td>
      <Td>Developers and translators can focus only on relevant sections</Td>
    </Tr>
    <Tr>
      <Td>‚úÖ Cleaner version control</Td>
      <Td>Smaller files reduce merge conflicts when working in teams</Td>
    </Tr>
    <Tr>
      <Td>‚úÖ Enables lazy loading</Td>
      <Td>You can load only the required message files per route if needed</Td>
    </Tr>
  </tbody>
</table>

##### Here are some recommended setup options

<Steps>
### Example `common.json` (shared UI labels)

Messages represent the translations that are available per language and can be provided either locally or loaded from a remote data source.

The simplest option is to add JSON files in your local project folder:
```json
// messages/en/common.json
{
  "nav": {
    "home": "Home",
    "settings": "Settings"
  },
  "buttons": {
    "submit": "Submit",
    "cancel": "Cancel"
  }
}
```

```json
// messages/vi/common.json
{
  "nav": {
    "home": "Trang ch·ªß",
    "settings": "C√†i ƒë·∫∑t"
  },
  "buttons": {
    "submit": "G·ª≠i",
    "cancel": "H·ªßy"
  }
}
```
### `next.config.ts`
Now, set up the plugin which creates an alias to provide a request-specific i18n configuration like your messages to Server Components‚Äîmore on this in the following steps.

Go to official documentation for more details: [next.config.ts](https://next-intl.dev/docs/getting-started/app-router/with-i18n-routing#next-config)

### `src/i18n/routing.ts`
Go to official documentation for more details: [src/i18n/routing.ts](https://next-intl.dev/docs/getting-started/app-router/with-i18n-routing#i18n-routing)

### `src/i18n/navigation.ts`
Go to official documentation for more details: [src/i18n/navigation.ts](https://next-intl.dev/docs/getting-started/app-router/with-i18n-routing#i18n-navigation)

### `src/middleware.ts`
Go to official documentation for more details: [src/middleware.ts](https://next-intl.dev/docs/getting-started/app-router/with-i18n-routing#middleware)

### `src/i18n/request.ts`
When using features from `next-intl` inside Server Components, the internationalization setup is automatically loaded from a central configuration file located at `src/i18n/request.ts`.

By convention, this file is responsible for providing locale-aware configuration scoped to the current request. When you use a modular file structure (e.g. splitting messages into `home.json`, `auth.json`, etc.), this module can dynamically import and combine those files:

```ts
import {getRequestConfig} from 'next-intl/server';
import {hasLocale} from 'next-intl';
import {routing} from './routing';

export default getRequestConfig(async ({requestLocale}) => {
  const requested = await requestLocale;
  const locale = hasLocale(routing.locales, requested)
    ? requested
    : routing.defaultLocale;

  // Load split message files and merge
  const common = (await import(`../../messages/${locale}/common.json`)).default;
  const home = (await import(`../../messages/${locale}/home.json`)).default;
  const auth = (await import(`../../messages/${locale}/auth.json`)).default;

  const messages = {
    ...common,
    ...home,
    ...auth
  };

  return {
    locale,
    messages
  };
});
```

### `src/app/[locale]/layout.tsx`
Go to official documentation for more details: [src/app/[locale]/layout.tsx](https://next-intl.dev/docs/getting-started/app-router/with-i18n-routing#layout)

### `src/app/[locale]/page.tsx`
Go to official documentation for more details: [src/app/[locale]/page.tsx](https://next-intl.dev/docs/getting-started/app-router/with-i18n-routing#page)

</Steps>

That‚Äôs all it takes!

<Callout emoji="üß†" type='info'>
 Key Benefits:
  - Supports modular translation files per page or feature
- Keeps translations organized and scalable
- Ensures the right messages are loaded for each request
- Works seamlessly with Server Components
</Callout>



#### 2. Translation Key Naming Convention
> A well-structured translation system is essential for building scalable and maintainable multilingual applications. Below is a recommended convention for naming translation keys when using next-intl, especially with split JSON files per feature or page.

<Callout emoji="‚úÖ" type='info'>
  Recommended Key Naming Convention

  Since each file is already scoped by context, keys inside the file should use nested groupings, but do not need a redundant namespace prefix.
</Callout>

‚úÖ Good Example ‚Äì auth.json:
```json
{
  "form": {
    "email": "Email",
    "password": "Password"
  },
  "button": {
    "login": "Login",
    "register": "Register"
  },
  "error": {
    "invalid": "Invalid email or password"
  }
}
```
> üì¶ In your code:

```ts
import {useTranslations} from 'next-intl';

const t = useTranslations('auth');

<Form.Input label={t('form.email')} />
<Form.Input label={t('form.password')} />
```

‚ùå Bad Example ‚Äì auth.json:
```json
//Flat and long keys with manual namespacing
{
  "auth_form_email": "Email",
  "auth_button_login": "Login"
}
```

- ‚ùå Verbose and repetitive
- ‚ùå Difficult to manage and group logically
- ‚ùå Weak IDE support

```json
//Redundant nesting with filenames:
{
  "Auth": {
    "form": {
      "email": "Email"
    }
  }
}
```

- ‚ùå Duplicates the file context (file is already `auth.json`)
- ‚ùå Requires `t('Auth.form.email')` instead of `t('form.email')`
- ‚ùå Harder to scan visually

## References

- [`next-intl`](https://next-intl.dev/) ‚Äî Internationalization for Next.js
